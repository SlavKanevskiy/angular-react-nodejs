<div class="locations-container">

  @if (loading()) {
    <div class="locations-container__loading">
      <mat-spinner></mat-spinner>
    </div>
  }

  @if (error()) {
    <div class="locations-container__error">{{ error() }}</div>
  }

  @if (!loading() && !error()) {
    <mat-form-field class="locations-container__filter">
      <mat-label>Search</mat-label>
      <input matInput [value]="filterText()" (input)="onFilterChange($any($event.target).value)" placeholder="Name, latitude or longitude...">
    </mat-form-field>
  }

  @if (isEmpty()) {
    <p class="locations-container__empty">No locations found</p>
  }

  @if (hasLocations()) {
    <cdk-virtual-scroll-viewport itemSize="50" class="locations-list">
      <app-location-card
        *cdkVirtualFor="let location of filteredLocations()"
        [location]="location"
        [height]="50"
        (cardClick)="onCardClick($event)"
        (delete)="onDeleteLocation($event)"
      />
    </cdk-virtual-scroll-viewport>
  }

  <div class="locations-container__actions">
    <button mat-raised-button color="primary" (click)="generateLocations(10)">
      +10
    </button>
    <button mat-raised-button color="primary" (click)="generateLocations(100)">
      +100
    </button>
    <button mat-raised-button color="primary" (click)="generateLocations(1000)">
      +1000
    </button>
    <button mat-raised-button color="warn" (click)="clearAll()">
      Clear all
    </button>
  </div>
</div>
